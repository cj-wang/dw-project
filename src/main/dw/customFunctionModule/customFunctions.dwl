%dw 2.0
import * from dw::core::Arrays
fun changeSreetTypeToCode(str)= do{
    var keyWord = ["Avenue", "Close", "Crescent", "Cresent", "Drive", "Parade", "Place", "Road", "Street", "Access", "Acre", "Airwalk", "Alley", "Alleyway", "Amble", "Anchorage", "Approach", "Arcade", "Arterial", "Artery", "Banan", "Bank", "Barracks", "Basin", "Bay", "Beach", "Bend", "Block", "Boardwalk", "Boulevard", "Boulevarde", "Boundary", "Bowl", "Brace", "Brae", "Branch", "Break", "Brett", "Bridge", "Broadwalk", "Broadway", "Brow", "Building", "Bull", "Busway", "Bypass", "Byway", "Causeway", "Centre", "Centreway", "Chambers", "Chase", "Circle", "Circlet", "Circuit", "Circus", "Cluster", "Colonnade", "Common", "Commons", "Community", "Complex", "Concord", "Concourse", "Connection", "Copse", "Corner", "Corso", "Course", "Court", "Courtyard", "Cove", "Creek", "Crest", "Crief", "Crook", "Cross", "Crossing", "Crossroad", "Crossway", "Cruiseway", "Cul-De-Sac", "Cut", "Cutting", "Cutting-", "Dale", "Dash", "Dell", "Dene", "Deviation", "Dip", "Distributor", "Divide", "Dock", "Domain", "Down", "Downs", "Driveway", "Easement", "East", "Edge", "Elbow", "End", "Entrance", "Esplanade", "Establishment", "Estate", "Expressway", "Extension", "Fair", "Fairway", "Fire Track", "Fireline", "Firebreak", "Firetrail", "Flat", "Flats", "Follow", "Footway", "Ford", "Foreshore", "Fork", "Formation", "Freeway", "Front", "Frontage", "Gap", "Garden", "Gardens", "Gate", "Gates", "Gateway", "Glade", "Glen", "Grange", "Green", "Ground", "Grove", "Gully", "Harbour", "Haven", "Heath", "Heights", "Highroad", "Highway", "Hike", "Hill", "Hills", "Hillside", "Hollow", "Home", "Homes", "House", "Hub", "Inlet", "Interchange", "Intersection", "Island", "Junction", "Key", "Keys", "Knoll", "Ladder", "Landing", "Lane", "Laneway", "Lead", "Leader", "Lees", "Level", "Line", "Link", "Little", "Location", "Lookout", "Loop", "Lower", "Lynne", "Mall", "Manor", "Market", "Marketland", "Marketown", "Mart", "Maze", "Mead", "Meander", "Mew", "Mews", "Mile", "Motorway", "Mount", "Mountain", "Nook", "North", "Null", "Outlet", "Outlook", "Oval", "Palms", "Paradise", "Park", "Parklands", "Parkway", "Part", "Pass", "Passage", "Path", "Pathway", "Peninsula", "Piazza", "Pier", "Plateau", "Plaza", "Pocket", "Point", "Port", "Precinct", "Promenade", "Pursuit", "Quad", "Quadrangle", "Quadrant", "Quay", "Quays", "Racecourse", "Railway Siding", "Ramble", "Ramp", "Range", "Reach", "Reef", "Reserve", "Rest", "Retreat", "Return", "Ride", "Ridge", "Ridgeway", "Right of way", "Ring", "Rise", "Rising", "River", "Riverway", "Riviera", "Roads", "Roadside", "Roadway", "Ronde", "Rosebowl", "Rotary", "Round", "Route", "Row", "Rowe", "Rue", "Run", "Section", "Service way", "Shunt", "Siding", "Skyline", "Slope", "Sound", "South", "Spur", "Square", "Stairs", "State highway", "Station", "Steps", "Straight", "Strait", "Strand", "Strip", "Subway", "Tarn", "Terrace", "Thoroughfare", "Throughway", "Tollway", "Top", "Tor", "Tower", "Towers", "Track", "Trail", "Trailer", "Tramway", "Traverse", "Triangle", "Trunkway", "Tunnel", "Turn", "Twist", "Underpass", "Upper", "Vale", "Valley", "Verge", "Viaduct", "Via-duct", "View", "Views", "Villa", "Village", "Villas", "Vista", "Vue", "Wade", "Walk", "Walkway", "Waters", "Waterway", "Way", "West", "Wharf", "Wood", "Woods", "Wynd", "Yard", ""] map lower($)
    var code = ["AVE", "CL", "CRES", "CRES", "DR", "PDE", "PL", "RD", "ST", "ACCS", "ACRE", "AWLK", "ALLY", "ALWY", "AMBL", "ANCG", "APP", "ARC", "ARTL", "ART", "BA", "BANK", "BRCKS", "BASN", "BAY", "BCH", "BEND", "BLK", "BWLK", "BVD", "BVDE", "BNDRY", "BOWL", "BRCE", "BRAE", "BRAN", "BRK", "BRET", "BDGE", "BRDWLK", "BDWY", "BROW", "BLDG", "BULL", "BSWY", "BYPA", "BYWY", "CAUS", "CTR", "CNWY", "CHMBRS", "CH", "CIR", "CLT", "CCT", "CRCS", "CLR", "CLDE", "CMMN", "CMMNS", "COMM", "CMPLX", "CNCD", "CON", "CNTN", "CPS", "CNR", "CSO", "CORS", "CT", "CTYD", "COVE", "CK", "CRST", "CRF", "CRK", "CRSS", "CRSG", "CRD", "COWY", "CUWY", "CDS", "CUT", "CUTT", "CTTG", "DALE", "DASH", "DELL", "DENE", "DEVN", "DIP", "DSTR", "DIV", "DOCK", "DOM", "DOWN", "DWNS", "DRWY", "ESMT", "EAST", "EDGE", "ELB", "END", "ENT", "ESP", "ESTB", "EST", "EXP", "EXTN", "FAIR", "FAWY", "FTRK", "FLNE", "FBRK", "FITR", "FLAT", "FLTS", "FOLW", "FTWY", "FORD", "FSHR", "FORK", "FORM", "FWY", "FRNT", "FRTG", "GAP", "GDN", "GDNS", "GTE", "GTES", "GWY", "GLD", "GLEN", "GRA", "GRN", "GRND", "GR", "GLY", "HRBR", "HVN", "HTH", "HTS", "HRD", "HWY", "HIKE", "HILL", "HILLS", "HLSD", "HLLW", "HM", "HMS", "HSE", "HUB", "INLT", "INTG", "INTN", "ID", "JNC", "KEY", "KEYS", "KNOL", "LADR", "LDG", "LANE", "LNWY", "LEAD", "LEDR", "LEES", "LVL", "LINE", "LINK", "LT", "LCN", "LKT", "LOOP", "LWR", "LYNN", "MALL", "MANR", "MRKT", "MRKTLND", "MRKTWN", "MART", "MZ", "MEAD", "MNDR", "MEW", "MEWS", "MILE", "MWY", "MT", "MTN", "NOOK", "NTH", "NULL", "OTLT", "OTLK", "OVAL", "PLMS", "PRDS", "PARK", "PKLD", "PKWY", "PART", "PASS", "PSGE", "PATH", "PHWY", "PSLA", "PIAZ", "PR", "PLAT", "PLZA", "PKT", "PNT", "PORT", "PREC", "PROM", "PRST", "QUAD", "QDGL", "QDRT", "QY", "QYS", "RACECRSE", "RLYSDNG", "RMBL", "RAMP", "RNGE", "RCH", "REEF", "RES", "REST", "RTT", "RTN", "RIDE", "RDGE", "RGWY", "ROWY", "RING", "RISE", "RSNG", "RVR", "RVWY", "RVRA", "RDS", "RDSD", "RDWY", "RNDE", "RSBL", "RTY", "RND", "RTE", "ROW", "ROWE", "RUE", "RUN", "SECTN", "SWY", "SHUN", "SDNG", "SKLN", "SLPE", "SND", "STH", "SPUR", "SQ", "STRS", "SHWY", "STN", "STPS", "STRT", "STAI", "STRA", "STRP", "SBWY", "TARN", "TCE", "THOR", "THRU", "TLWY", "TOP", "TOR", "TWR", "TWRS", "TRK", "TRL", "TRLR", "TMWY", "TVSE", "TRI", "TKWY", "TUNL", "TURN", "TWIST", "UPAS", "UPR", "VALE", "VLLY", "VERGE", "VDCT", "VIAD", "VIEW", "VWS", "VLLA", "VLGE", "VLLS", "VSTA", "VUE", "WADE", "WALK", "WKWY", "WTRS", "WTWY", "WAY", "WEST", "WHRF", "WD", "WDS", "WYND", "YARD", "EMPTY"]
    ---
    if((code map lower($)) contains lower(str)) upper(str)
    else code[indexOf(keyWord,lower(str))]
}
fun countryCodeToText(str)= do{
    //var countryText = ["AFGHANISTAN", "ALBANIA", "ALGERIA", "AMERICAN SAMOA", "ANDORRA", "ANGOLA", "ANGUILLA", "ANTARCTICA", "ANTIGUA AND BARBUDA", "ARGENTINA", "ARMENIA", "ARUBA", "AUSTRIA", "AZERBAIJAN", "BAHAMAS", "BAHRAIN", "BANGLADESH", "BARBADOS", "BELARUS", "BELGIUM", "BELIZE", "BENIN", "BERMUDA", "BHUTAN", "BOLIVIA", "BOSNIA & HERZEGOVINA", "BOTSWANA", "BOUVET ISLAND", "BRAZIL", "BRIT -PROTECTED PERS", "BRIT DEPEND TERRCIT", "BRIT INDIAN OCN TERR", "UNITED KINGDOM", "BRITISH -O", "BRITISH -SUBJECT", "BRITISH NATIONAL OVERSEAS", "BRUNEI DARUSSALAM", "BULGARIA", "BURKINA FASO", "BURKINA FASO", "BURMA", "BURUNDI", "BYELORUSSIA", "CAMBODIA", "CAMEROON", "CANADA", "CAPE VERDE", "CAYMAN ISLANDS", "CENTRAL AFRICAN REP", "CHAD", "CHILE", "CHINA", "COCOS (KEELING) ISL.", "COLOMBIA", "COMOROS", "CONGO", "COOK ISLANDS", "COSTA RICA", "COTE D' IVOIRE", "CROATIA", "CUBA", "CYPRUS", "CZECH REPUBLIC", "CZECHOSLOVAKIA", "DEM REP OF THE CONGO", "DENMARK", "DJIBOUTI", "DOMINICA", "DOMINICAN REPUBLIC", "EAST GERMANY", "EAST TIMOR", "ECUADOR", "EGYPT", "EL SALVADOR", "EQUATORIAL GUINEA", "ERITREA", "ESTONIA", "ETA TEST", "ETHIOPIA", "FALKLAND ISLANDS", "FAEROE ISLAND", "FIJI", "FINLAND", "FRANCE", "FRANCE", "FRENCH GUIANA", "FR POLYNESIA", "FRENCH SOUTHERN TERR", "FYR MACEDONIA", "GABON", "GAMBIA", "GEORGIA", "GEORGIA", "GERMANY", "GHANA", "GIBRALTAR", "GREECE", "GREENLAND", "GRENADA", "GUADELOUPE", "GUAM", "GUATEMALA", "GUINEA", "GUINEA-BISSAU", "GUYANA", "HAITI", "HEARD & MCDONALD ISL", "HONDURAS", "HONG KONG SAR", "HUNGARY", "ICELAND", "INDIA", "INDONESIA", "IRAN", "IRAQ", "IRELAND", "ISRAEL", "ITALY", "JAMAICA", "JAPAN", "JORDAN", "KAZAKHSTAN", "KENYA", "KIRIBATI", "KOREA", "KOREA", "KUWAIT", "KYRGYZSTAN", "LAO PEOPLES DEM REP", "LATVIA", "LEBANON", "LIBERIA", "LIBYA", "LIECHTENSTEIN", "LITHUANIA", "LUXEMBOURG", "MACAU SAR", "MADAGASCAR", "MALAWI", "MALAYSIA", "MALDIVES", "MALI", "MALTA", "MARSHALL ISLANDS", "MARTINIQUE", "MAURITANIA", "MAURITIUS", "MAYOTTE", "MEXICO", "MICRONESIA", "MOLDOVA", "MONACO", "MONGOLIA", "MONTENEGRO", "MONTSERRAT", "MOROCCO", "MOZAMBIQUE", "MYANMAR", "NAMIBIA", "NAURU", "NEPAL", "NETHERLANDS", "NETHERLANDS ANTILLES", "NEUTRAL ZONE", "NEW CALEDONIA", "NICARAGUA", "NIGER", "NIGERIA", "NIUE", "NORTHERN MARIANA ISL", "NORWAY", "OMAN", "PAKISTAN", "PALAU", "PALESTINIAN AUTHRTY", "PANAMA", "PAPUA NEW GUINEA", "PARAGUAY", "PERU", "PHILIPPINES", "PITCAIRN", "POLAND", "PORTUGAL", "PUERTO RICO", "QATAR", "REFUGEE AS PER ART 1", "REFUGEE OTHER", "REUNION", "ROMANIA", "ROMANIA PRE 1/2/2002", "RUSSIAN FEDERATION", "RWANDA", "SAINT LUCIA", "SAMOA", "SAN MARINO", "SAO TOME & PRINCIPE", "SAUDI ARABIA", "SENEGAL", "SERBIA AND MONTENEGRO", "SERBIA", "SEYCHELLES", "SIERRA LEONE", "SINGAPORE", "SLOVAKIA", "SLOVENIA", "SOLOMON ISLANDS", "SOMALIA", "SOUTH AFRICA", "SOVIET UNION", "SPAIN", "SRI LANKA", "ST HELENA", "ST KITTS & NEVIS", "ST PIERRE & MIQUELON", "ST VINCENT", "STATELESS PERSON", "SUDAN", "SURINAME", "SVALBARD & JAN MAYEN", "SWAZILAND", "SWEDEN", "SWITZERLAND", "SYRIA", "TAIWAN", "TAJIKISTAN", "TANZANIA", "THAILAND", "TIMOR-LESTE", "TOGO", "TOKELAU", "TONGA", "TRINIDAD", "TUNISIA", "TURKEY", "TURKMENISTAN", "TURKS AND CAICOS ISL", "TUVALU", "U.S MINOR ISLANDS", "UGANDA", "UKRAINE", "UNITED ARAB EMIRATES", "UNITED NATIONS AGNCY", "UNITED STATES", "UNMIK TRAVEL DOC", "UNSPCFED NATIONALITY", "URUGUAY", "UZBEKISTAN", "VANUATU", "VATICAN CITY STATE", "VENEZUELA", "VIETNAM", "VIRGIN ISLANDS (BRIT)", "US VIRGIN IS", "WALLIS & FUTUNA ISL", "WESTERN SAHARA", "YEMEN", "YEMEN", "YUGOSLAVIA", "ZAIRE", "UNITED NATIONS ORG", "ZAMBIA", "ZIMBABWE", "NEW ZEALAND", "AUSTRALIA", "NEW ZEALAND", "AUSTRALIA"]
    //var countryCode = ["AFG", "ALB", "DZA", "ASM", "AND", "AGO", "AIA", "ATA", "ATG", "ARG", "ARM", "ABW", "AUT", "AZE", "BHS", "BHR", "BGD", "BRB", "BLR", "BEL", "BLZ", "BEN", "BMU", "BTN", "BOL", "BIH", "BWA", "BVT", "BRA", "GBP", "GBD", "IOT", "GBR", "GBO", "GBS", "GBN", "BRN", "BGR", "BFA", "HVO", "BUR", "BDI", "BYS", "KHM", "CMR", "CAN", "CPV", "CYM", "CAF", "TCD", "CHL", "CHN", "CCK", "COL", "COM", "COG", "COK", "CRI", "CIV", "HRV", "CUB", "CYP", "CZE", "CSK", "COD", "DNK", "DJI", "DMA", "DOM", "DDR", "TMP", "ECU", "EGY", "SLV", "GNQ", "ERI", "EST", "TST", "ETH", "FLK", "FRO", "FJI", "FIN", "FRA", "FXX", "GUF", "PYF", "ATF", "MKD", "GAB", "GMB", "GEO", "SGS", "GER", "GHA", "GIB", "GRC", "GRL", "GRD", "GLP", "GUM", "GTM", "GIN", "GNB", "GUY", "HTI", "HMD", "HND", "HKG", "HUN", "ISL", "IND", "IDN", "IRN", "IRQ", "IRL", "ISR", "ITA", "JAM", "JPN", "JOR", "KAZ", "KEN", "KIR", "PRK", "KOR", "KWT", "KGZ", "LAO", "LVA", "LBN", "LBR", "LBY", "LIE", "LTU", "LUX", "MAC", "MDG", "MWI", "MYS", "MDV", "MLI", "MLT", "MHL", "MTQ", "MRT", "MUS", "MYT", "MEX", "FSM", "MDA", "MCO", "MNG", "MNE", "MSR", "MAR", "MOZ", "MMR", "NAM", "NRU", "NPL", "NLD", "ANT", "NTZ", "NCL", "NIC", "NER", "NGA", "NIU", "MNP", "NOR", "OMN", "PAK", "PLW", "PSE", "PAN", "PNG", "PRY", "PER", "PHL", "PCN", "POL", "PRT", "PRI", "QAT", "XXB", "XXC", "REU", "ROU", "ROM", "RUS", "RWA", "LCA", "WSM", "SMR", "STP", "SAU", "SEN", "SCG", "SRB", "SYC", "SLE", "SGP", "SVK", "SVN", "SLB", "SOM", "ZAF", "SUN", "ESP", "LKA", "SHN", "KNA", "SPM", "VCT", "XXA", "SDN", "SUR", "SJM", "SWZ", "SWE", "CHE", "SYR", "TWN", "TJK", "TZA", "THA", "TLS", "TGO", "TKL", "TON", "TTO", "TUN", "TUR", "TKM", "TCA", "TUV", "UMI", "UGA", "UKR", "ARE", "UNA", "USA", "UNK", "XXX", "URY", "UZB", "VUT", "VAT", "VEN", "VNM", "VGB", "VIR", "WLF", "ESH", "YEM", "YMD", "YUG", "ZAR", "UNO", "ZMB", "ZWE", "NZL", "AUS", "NZ", "AU"]
    var countryCodeLookup = [ { "code": "AFG", "country": "AFGHANISTAN" }, { "code": "ALA", "country": "ALAND ISLANDS" }, { "code": "ALB", "country": "ALBANIA" }, { "code": "DZA", "country": "ALGERIA" }, { "code": "ASM", "country": "AMERICAN SAMOA" }, { "code": "AND", "country": "ANDORRA" }, { "code": "AGO", "country": "ANGOLA" }, { "code": "AIA", "country": "ANGUILLA" }, { "code": "ATA", "country": "ANTARCTICA" }, { "code": "ATG", "country": "ANTIGUA AND BARBUDA" }, { "code": "ARG", "country": "ARGENTINA" }, { "code": "ARM", "country": "ARMENIA" }, { "code": "ABW", "country": "ARUBA" }, { "code": "AUS", "country": "AUSTRALIA" }, { "code": "AUT", "country": "AUSTRIA" }, { "code": "AZE", "country": "AZERBAIJAN" }, { "code": "BHS", "country": "BAHAMAS" }, { "code": "BHR", "country": "BAHRAIN" }, { "code": "BGD", "country": "BANGLADESH" }, { "code": "BRB", "country": "BARBADOS" }, { "code": "BLR", "country": "BELARUS" }, { "code": "BEL", "country": "BELGIUM" }, { "code": "BLZ", "country": "BELIZE" }, { "code": "BEN", "country": "BENIN" }, { "code": "BMU", "country": "BERMUDA" }, { "code": "BTN", "country": "BHUTAN" }, { "code": "BOL", "country": "BOLIVIA" }, { "code": "BES", "country": "BONAIRE, SINT EUSTATIUS AND SABA" }, { "code": "BIH", "country": "BOSNIA & HERZEGOVINA" }, { "code": "BWA", "country": "BOTSWANA" }, { "code": "BVT", "country": "BOUVET ISLAND" }, { "code": "BRA", "country": "BRAZIL" }, { "code": "IOT", "country": "BRIT INDIAN OCN TERR" }, { "code": "BRN", "country": "BRUNEI DARUSSALAM" }, { "code": "BGR", "country": "BULGARIA" }, { "code": "BFA", "country": "BURKINA FASO" }, { "code": "BDI", "country": "BURUNDI" }, { "code": "MMR", "country": "BURMA" }, { "code": "CPV", "country": "CAPE VERDE" }, { "code": "KHM", "country": "CAMBODIA" }, { "code": "CMR", "country": "CAMEROON" }, { "code": "CAN", "country": "CANADA" }, { "code": "CYM", "country": "CAYMAN ISLANDS" }, { "code": "CAF", "country": "CENTRAL AFRICAN REP" }, { "code": "TCD", "country": "CHAD" }, { "code": "CHL", "country": "CHILE" }, { "code": "CHN", "country": "CHINA" }, { "code": "CXR", "country": "CHRISTMAS ISLAND" }, { "code": "CCK", "country": "COCOS (KEELING) ISL." }, { "code": "COL", "country": "COLOMBIA" }, { "code": "COM", "country": "COMOROS" }, { "code": "COD", "country": "DEM REP OF THE CONGO" }, { "code": "COG", "country": "CONGO" }, { "code": "COK", "country": "COOK ISLANDS" }, { "code": "CRI", "country": "COSTA RICA" }, { "code": "HRV", "country": "CROATIA" }, { "code": "CUB", "country": "CUBA" }, { "code": "CUW", "country": "CURACAO" }, { "code": "CYP", "country": "CYPRUS" }, { "code": "CZE", "country": "CZECH REPUBLIC" }, { "code": "CIV", "country": "COTE D' IVOIRE" }, { "code": "DNK", "country": "DENMARK" }, { "code": "DJI", "country": "DJIBOUTI" }, { "code": "DMA", "country": "DOMINICA" }, { "code": "DOM", "country": "DOMINICAN REPUBLIC" }, { "code": "ECU", "country": "ECUADOR" }, { "code": "EGY", "country": "EGYPT" }, { "code": "SLV", "country": "EL SALVADOR" }, { "code": "GNQ", "country": "EQUATORIAL GUINEA" }, { "code": "ERI", "country": "ERITREA" }, { "code": "EST", "country": "ESTONIA" }, { "code": "SWZ", "country": "ESWATINI" }, { "code": "ETH", "country": "ETHIOPIA" }, { "code": "FLK", "country": "FALKLAND ISLANDS" }, { "code": "FRO", "country": "FAROE ISLANDS" }, { "code": "FJI", "country": "FIJI" }, { "code": "FIN", "country": "FINLAND" }, { "code": "FRA", "country": "FRANCE" }, { "code": "GUF", "country": "FRENCH GUIANA" }, { "code": "PYF", "country": "FRENCH POLYNESIA" }, { "code": "ATF", "country": "FRENCH SOUTHERN TERR" }, { "code": "GAB", "country": "GABON" }, { "code": "GMB", "country": "GAMBIA" }, { "code": "GEO", "country": "GEORGIA" }, { "code": "DEU", "country": "GERMANY" }, { "code": "GHA", "country": "GHANA" }, { "code": "GIB", "country": "GIBRALTAR" }, { "code": "GRC", "country": "GREECE" }, { "code": "GRL", "country": "GREENLAND" }, { "code": "GRD", "country": "GRENADA" }, { "code": "GLP", "country": "GUADELOUPE" }, { "code": "GUM", "country": "GUAM" }, { "code": "GTM", "country": "GUATEMALA" }, { "code": "GGY", "country": "GUERNSEY" }, { "code": "GIN", "country": "GUINEA" }, { "code": "GNB", "country": "GUINEA-BISSAU" }, { "code": "GUY", "country": "GUYANA" }, { "code": "HTI", "country": "HAITI" }, { "code": "HMD", "country": "HEARD & MCDONALD ISL" }, { "code": "VAT", "country": "VATICAN CITY STATE" }, { "code": "HND", "country": "HONDURAS" }, { "code": "HKG", "country": "HONG KONG" }, { "code": "HUN", "country": "HUNGARY" }, { "code": "ISL", "country": "ICELAND" }, { "code": "IND", "country": "INDIA" }, { "code": "IDN", "country": "INDONESIA" }, { "code": "IRN", "country": "IRAN" }, { "code": "IRQ", "country": "IRAQ" }, { "code": "IRL", "country": "IRELAND" }, { "code": "IMN", "country": "ISLE OF MAN" }, { "code": "ISR", "country": "ISRAEL" }, { "code": "ITA", "country": "ITALY" }, { "code": "JAM", "country": "JAMAICA" }, { "code": "JPN", "country": "JAPAN" }, { "code": "JEY", "country": "JERSEY" }, { "code": "JOR", "country": "JORDAN" }, { "code": "KAZ", "country": "KAZAKHSTAN" }, { "code": "KEN", "country": "KENYA" }, { "code": "KIR", "country": "KIRIBATI" }, { "code": "PRK", "country": "NORTH KOREA" }, { "code": "KOR", "country": "KOREA (REPUBLIC OF)" }, { "code": "KWT", "country": "KUWAIT" }, { "code": "KGZ", "country": "KYRGYZSTAN" }, { "code": "LAO", "country": "LAO PEOPLES DEM REP" }, { "code": "LVA", "country": "LATVIA" }, { "code": "LBN", "country": "LEBANON" }, { "code": "LSO", "country": "LESOTHO" }, { "code": "LBR", "country": "LIBERIA" }, { "code": "LBY", "country": "LIBYA" }, { "code": "LIE", "country": "LIECHTENSTEIN" }, { "code": "LTU", "country": "LITHUANIA" }, { "code": "LUX", "country": "LUXEMBOURG" }, { "code": "MAC", "country": "MACAU SAR" }, { "code": "MDG", "country": "MADAGASCAR" }, { "code": "MWI", "country": "MALAWI" }, { "code": "MYS", "country": "MALAYSIA" }, { "code": "MDV", "country": "MALDIVES" }, { "code": "MLI", "country": "MALI" }, { "code": "MLT", "country": "MALTA" }, { "code": "MHL", "country": "MARSHALL ISLANDS" }, { "code": "MTQ", "country": "MARTINIQUE" }, { "code": "MRT", "country": "MAURITANIA" }, { "code": "MUS", "country": "MAURITIUS" }, { "code": "MYT", "country": "MAYOTTE" }, { "code": "MEX", "country": "MEXICO" }, { "code": "FSM", "country": "MICRONESIA" }, { "code": "MDA", "country": "MOLDOVA" }, { "code": "MCO", "country": "MONACO" }, { "code": "MNG", "country": "MONGOLIA" }, { "code": "MNE", "country": "MONTENEGRO" }, { "code": "MSR", "country": "MONTSERRAT" }, { "code": "MAR", "country": "MOROCCO" }, { "code": "MOZ", "country": "MOZAMBIQUE" }, { "code": "MMR", "country": "MYANMAR" }, { "code": "NAM", "country": "NAMIBIA" }, { "code": "NRU", "country": "NAURU" }, { "code": "NPL", "country": "NEPAL" }, { "code": "NLD", "country": "NETHERLANDS" }, { "code": "NCL", "country": "NEW CALEDONIA" }, { "code": "NZL", "country": "NEW ZEALAND" }, { "code": "NIC", "country": "NICARAGUA" }, { "code": "NER", "country": "NIGER" }, { "code": "NGA", "country": "NIGERIA" }, { "code": "NIU", "country": "NIUE" }, { "code": "NFK", "country": "NORFOLK ISLAND" }, { "code": "MNP", "country": "NORTHERN MARIANA ISL" }, { "code": "NOR", "country": "NORWAY" }, { "code": "OMN", "country": "OMAN" }, { "code": "PAK", "country": "PAKISTAN" }, { "code": "PLW", "country": "PALAU" }, { "code": "PSE", "country": "PALESTINIAN AUTHRTY" }, { "code": "PAN", "country": "PANAMA" }, { "code": "PNG", "country": "PAPUA NEW GUINEA" }, { "code": "PRY", "country": "PARAGUAY" }, { "code": "PER", "country": "PERU" }, { "code": "PHL", "country": "PHILIPPINES" }, { "code": "PCN", "country": "PITCAIRN" }, { "code": "POL", "country": "POLAND" }, { "code": "PRT", "country": "PORTUGAL" }, { "code": "PRI", "country": "PUERTO RICO" }, { "code": "QAT", "country": "QATAR" }, { "code": "MKD", "country": "FYR MACEDONIA" }, { "code": "ROU", "country": "ROMANIA" }, { "code": "RUS", "country": "RUSSIAN FEDERATION" }, { "code": "RWA", "country": "RWANDA" }, { "code": "REU", "country": "REUNION" }, { "code": "BLM", "country": "SAINT BARTHELEMY" }, { "code": "SHN", "country": "ST HELENA" }, { "code": "KNA", "country": "ST KITTS & NEVIS" }, { "code": "LCA", "country": "SAINT LUCIA" }, { "code": "MAF", "country": "SAINT MARTIN" }, { "code": "SPM", "country": "ST PIERRE & MIQUELON" }, { "code": "VCT", "country": "ST VINCENT" }, { "code": "WSM", "country": "SAMOA" }, { "code": "SMR", "country": "SAN MARINO" }, { "code": "STP", "country": "SAO TOME & PRINCIPE" }, { "code": "SAU", "country": "SAUDI ARABIA" }, { "code": "SEN", "country": "SENEGAL" }, { "code": "SRB", "country": "SERBIA" }, { "code": "SYC", "country": "SEYCHELLES" }, { "code": "SLE", "country": "SIERRA LEONE" }, { "code": "SGP", "country": "SINGAPORE" }, { "code": "SXM", "country": "SINT MAARTEN" }, { "code": "SVK", "country": "SLOVAK REPUBLIC" }, { "code": "SVN", "country": "SLOVENIA" }, { "code": "SLB", "country": "SOLOMON ISLANDS" }, { "code": "SOM", "country": "SOMALIA" }, { "code": "ZAF", "country": "SOUTH AFRICA" }, { "code": "SGS", "country": "SOUTH GEORGIA AND SOUTH SANDWICH ISLANDS" }, { "code": "SSD", "country": "SOUTH SUDAN" }, { "code": "ESP", "country": "SPAIN" }, { "code": "LKA", "country": "SRI LANKA" }, { "code": "SDN", "country": "SUDAN" }, { "code": "SUR", "country": "SURINAME" }, { "code": "SJM", "country": "SVALBARD & JAN MAYEN" }, { "code": "SWE", "country": "SWEDEN" }, { "code": "CHE", "country": "SWITZERLAND" }, { "code": "SYR", "country": "SYRIA" }, { "code": "TWN", "country": "TAIWAN" }, { "code": "TJK", "country": "TAJIKISTAN" }, { "code": "TZA", "country": "TANZANIA" }, { "code": "THA", "country": "THAILAND" }, { "code": "TLS", "country": "TIMOR-LESTE" }, { "code": "TGO", "country": "TOGO" }, { "code": "TKL", "country": "TOKELAU" }, { "code": "TON", "country": "TONGA" }, { "code": "TTO", "country": "TRINIDAD AND TOBAGO" }, { "code": "TUN", "country": "TUNISIA" }, { "code": "TUR", "country": "TURKEY" }, { "code": "TKM", "country": "TURKMENISTAN" }, { "code": "TCA", "country": "TURKS AND CAICOS ISL" }, { "code": "TUV", "country": "TUVALU" }, { "code": "UGA", "country": "UGANDA" }, { "code": "UKR", "country": "UKRAINE" }, { "code": "ARE", "country": "UNITED ARAB EMIRATES" }, { "code": "GBR", "country": "UNITED KINGDOM" }, { "code": "UMI", "country": "U.S MINOR ISLANDS" }, { "code": "USA", "country": "UNITED STATES" }, { "code": "URY", "country": "URUGUAY" }, { "code": "UZB", "country": "UZBEKISTAN" }, { "code": "VUT", "country": "VANUATU" }, { "code": "VEN", "country": "VENEZUELA" }, { "code": "VNM", "country": "VIETNAM" }, { "code": "VGB", "country": "VIRGIN ISLANDS (BRIT" }, { "code": "VIR", "country": "VIRGIN ISLANDS (U.S)" }, { "code": "WLF", "country": "WALLIS & FUTUNA ISL" }, { "code": "ESH", "country": "WESTERN SAHARA" }, { "code": "YEM", "country": "YEMEN" }, { "code": "ZMB", "country": "ZAMBIA" }, { "code": "ZWE", "country": "ZIMBABWE" } ]
    ---
    //if((countryCode map upper($)) contains upper(str))
    //    countryText[indexOf(countryCode,upper(str))]
    //else  upper(str)
    (countryCodeLookup filter ($.code ~= str))[0].country default ""
}
fun changeSubAddressTypeTextToCode(str)= do{
    var keyWord = ["Apartment", "Basement", "Cottage", "Duplex", "Factory", "Flat", "Floor", "Ground Floor", "House", "Kiosk", "Level", "Lobby", "Lot", "Lower Ground Floor", "Maisonette", "Marine Berth", "Mezzanine", "Observation Deck", "Office", "Parking", "Penthouse", "Platform", "Podium", "Rear", "Rooftop", "Room", "Shed", "Shop", "Site", "Stall", "Studio", "Sub-basement", "Suite", "Townhouse", "Unit", "Upper Ground Floor", "Villa", "Ward", "Warehouse", "Antenna", "Automated Teller Machine", "Barbecue", "Block", "Boatshed", "Building", "Bungalow", "Cage", "Carpark", "Carspace", "Club", "Coolroom", "Garage", "Hall", "Lease", "Loft", "Reserve", "Section", "Showroom", "Sign", "Store", "Strata Unit", "Substation", "Tenancy", "Tower", "Vault", "Workshop", "BG", "BLG", "CTG", "Flat.", "Floor.", "FLR", "FLT", "Kiosk.", "Level.", "MST", "OFFC", "PHS", "RE", "Rear.", "Room.", "SHP", "STE", "STLL", "Tenancy.", "TOWNH", "Uni", "Unit.", "VIL", "VILLA.", "WHSE", "FY", "APT", "ATRIUM", "GATE"] map lower($)
    var code = ["APT", "B", "CTGE", "DUP", "FY", "F", "FL", "G", "HSE", "KSK", "L", "LB", "Lot", "LG", "MSNT", "MB", "M", "OD", "OFF", "P", "PTHS", "PLF", "PDM", "R", "RT", "RM", "SHED", "SHOP", "SITE", "SL", "STU", "SB", "SE", "TNHS", "U", "UG", "VLLA", "WARD", "WE", "ANT", "ATM", "BBQ", "BLCK", "BTSD", "BLDG", "BNGW", "CAGE", "CARP", "CARS", "CLUB", "COOL", "GRGE", "HALL", "LSE", "LOFT", "RES", "SEC", "SHRM", "SIGN", "STOR", "STR", "SUBS", "TNCY", "TWR", "VLT", "WKSH", "BG", "BLG", "CTG", "Flat", "Floor", "FLR", "FLT", "Kiosk", "Level", "MST", "OFFC", "PHS", "RE", "Rear", "Room", "SHP", "STE", "STLL", "Tenancy", "TOWNH", "Uni", "Unit", "VIL", "VILLA", "WHSE", "Factory", "Apartment", "ATRIUM", "GATE"]
    ---
    if((keyWord map lower($)) contains lower(str)) code[indexOf(keyWord,lower(str))]
    else str
}
fun getTimeZone(t) = t match {
case is "NSW" -> "Australia/Sydney"
case is "QLD" -> "Australia/Brisbane"
case is "SA" -> "Australia/Adelaide"
case is "TAS" -> "Australia/Hobart"
case is "VIC" -> "Australia/Melbourne"
case is "WA" -> "Australia/Perth"
case is "ACT" -> "Australia/Canberra"
case is "NT" -> "Australia/Darwin"
else -> "Australia/Canberra"
}

fun getFlowTypeReason(x) = x match {
case is "RELOCATION FOR BUSINESS ACCOUNT" -> "Relocation Order has gone offline because the service is associated with a business   account (i.e. business customer) 
     Contact the customer  to   discuss: 
     - placing relocation request for business customer" 
case is "Relocation Fetch Soft Bundle" -> "Relocation   Order has gone offline because the service    contains fetch as a soft bundle (JARVIS does not have any handling   yet) 
     Contact the customer  to discuss: 
     - placing relocation request for customer"
case is "NO SERVICE DETAILS FOR RELOCATION" -> "Relocation   Order has gone offline because Jarvis was down so unable to retrieve their   existing service details.
     Contact the customer to understand:
     - which service to relocation
     - if Appointment is required" 
case is "RELOCATION SPEED PACK NOT AVAILABLE" -> "Relocation   Order has gone offline because the current speed pack is not available at the   customer's new address.
     Contact the customer to discuss:
     - options related to speed pack "
case is "RELOCATION TECHNOLOGY CHANGE" -> "Relocation   Order has gone offline because No eligible plan for Relocation (need to   change technology)
     Contact the customer  to   discuss:
     - Change Technology scenario"
case is "APPOINTMENT BOOKING ERROR" -> "Relocation   Order has gone offline because an appointment booking error occurred causing   booking failure and therefore NBN setup not complete.
     Contact the customer  to   discuss:
     - Appointment Booking"
case is "RELOCATION NO ACCESS TO PROPERTY" -> "Relocation   Order has gone offline because the customer responded that they do not have   access to the property in one of the following questions in NBN questionnaire:   
     - multi-line question
     - multi port question
     - NCD unit question
     Contact the customer  to discuss:
     - supporting customer with NBN question(s)"
case is "ESQ FAILED" -> "Relocation   Order has gone offline because the ESQ failed in SFCC
      Contact the customer  to discuss:
     - placing relocation request for customer"
else -> x 
}













